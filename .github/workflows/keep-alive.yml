name: Keep Streamlit App Alive

# Run every 10 minutes to prevent the free-tier app from sleeping
on:
  schedule:
    # Runs every 10 minutes (*/10 = every 10 minutes)
    # Format: minute hour day month weekday
    - cron: '*/10 * * * *'

  # Allow manual triggering from GitHub Actions tab for testing
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      # Ping the app with a simple curl request
      # --fail-with-body: show error details if request fails
      # --silent: don't show progress bar
      # --show-error: show error messages
      # --max-time 30: timeout after 30 seconds
      # --retry 3: retry up to 3 times if it fails
      # --retry-delay 5: wait 5 seconds between retries
      # || true: always exit successfully (never fail the workflow)
      - name: Ping Streamlit App
        run: |
          curl --fail-with-body \
               --silent \
               --show-error \
               --max-time 30 \
               --retry 3 \
               --retry-delay 5 \
               "https://investor-sentiment-dashboard.streamlit.app/?ping=1" \
          || true
